

pipeline {
  agent any

  environment {
    DOCKERHUB = credentials('DokcerHub')
  }

  stages {
    stage('Checkout') {
      steps {
        git 'https://github.com/bassam2080/myapp6.git'    
      }
    }

    stage('Docker Login') {
      steps {
        sh '''
          echo $DOCKERHUB_PSW | docker login -u $DOCKERHUB_USR --password-stdin
        '''
      }
    }

    stage('Pull images') {
      steps {
        //docker compose pull â†’ gets bassam2080/myapp4-web:1.0 + mysql
        sh 'docker compose pull'
      }
    }

    stage('Deploy') {
      steps {
       // runs the same stack of dependensies as your local machine
        sh 'docker compose up -d'
      }
    }
  }
}
